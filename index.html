<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Video Site</title>

  <style>
    body { font-family: Arial; background:#0f0f0f; color:white; }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
      gap:15px;
      padding:20px;
    }

    .card{
      position:relative;
      cursor:pointer;
    }

    video, img{
      width:100%;
      border-radius:14px;
      display:block;
    }

    video{
      position:absolute;
      top:0;
      left:0;
      opacity:0;
      transition:0.3s;
    }

    .card:hover video{
      opacity:1;
    }
  </style>
</head>

<body>

<h2 style="text-align:center">Video Gallery</h2>

<div class="grid" id="videos"></div>

<script>

  // روابط الفيديوهات الخارجية
  const videoLinks = [
    "https://www.w3schools.com/html/mov_bbb.mp4",
    "https://www.w3schools.com/html/movie.mp4"
  ];

  const container = document.getElementById("videos");

  videoLinks.forEach(url => {

    // إنشاء عناصر الكارت
    const card = document.createElement("div");
    card.className = "card";

    const img = document.createElement("img");   // الصورة (thumbnail)
    const video = document.createElement("video"); // الفيديو hover

    video.src = url;
    video.muted = true;
    video.preload = "auto";

    // اوتو بلاي عند المرور
    card.onmouseover = () => video.play();
    card.onmouseout = () => { video.pause(); video.currentTime = 0; };

    // فتح صفحة المشاهدة
    card.onclick = () => {
      window.location.href = "watch.html?video=" + encodeURIComponent(url);
    };

    // توليد صورة من أول فريم
    video.addEventListener("loadeddata", () => {
      const canvas = document.createElement("canvas");
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;

      const ctx = canvas.getContext("2d");
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

      img.src = canvas.toDataURL("image/png");
    });

    card.appendChild(img);
    card.appendChild(video);
    container.appendChild(card);

  });

</script>

</body>
</html>
